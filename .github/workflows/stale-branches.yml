name: Stale Branches

on:
  schedule:
    - cron: '0 6 * * 1'  # Every Monday at 6am UTC
  workflow_dispatch:  # Allow manual trigger

permissions:
  issues: write
  contents: write

jobs:
  stale_branches:
    runs-on: ubuntu-latest
    steps:
      - name: Stale Branches
        # https://github.com/crs-k/stale-branches
        uses: crs-k/stale-branches@865501af01284d43aef267d4b9aab0f9f1734b12  # v8.2.2
        with:
          days-before-stale: 7
          days-before-delete: 14
          stale-branch-label: 'chore'
          branches-filter-regex: '^(?!release-please--).*$'
          tag-committer: true
          compare-branches: 'save'
          dry-run: true  # Test mode - remove after verification
